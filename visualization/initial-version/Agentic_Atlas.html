<!doctype html><html><head><meta charset='utf-8'/>
<title>Agentic Atlas — Transcontextual Map</title>
<style>
:root { --bg:#0b1220; --panel:#0f172a; --text:#e5e7eb; --muted:#9ca3af; --edge:#374151; --edgehi:#a5b4fc; }
html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,Segoe UI,Roboto,Arial}
.wrap{display:grid;grid-template-columns:360px 1fr;height:100%}
.left{background:var(--panel);padding:16px;border-right:1px solid #111827;overflow:auto}
.right{position:relative;overflow:auto}
h1{font-size:18px;margin:0 0 8px}h2{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;margin:16px 0 6px}
input,select{width:100%;padding:8px 10px;background:#0b1220;color:var(--text);border:1px solid #1f2937;border-radius:8px}
.row{display:grid;grid-template-columns:1fr 1fr;gap:8px}.tip{font-size:12px;color:var(--muted)}
svg{width:2000px;height:1400px;background:linear-gradient(180deg,#0b1220,#0c1629)}.svgwrap{min-width:1200px;height:100%}
.edge{stroke:var(--edge);stroke-width:1;opacity:.6;fill:none;marker-end:url(#arrow)}.edgehi{stroke:var(--edgehi);opacity:.95}
.node text{font-size:12px;fill:#e5e7eb;pointer-events:none}.ring{stroke:#fff;stroke-width:2;fill:none;opacity:.22}.dash{stroke-dasharray:4 3}
.layer{fill:#9ca3af;font-size:12px;text-transform:uppercase;letter-spacing:.08em}
.badge{display:inline-block;background:#0b1220;border:1px solid #1f2937;border-radius:999px;padding:4px 8px;margin-right:6px;font-size:12px;color:#cbd5e1}
</style></head>
<body><div class='wrap'>
  <div class='left'>
    <h1>Agentic Atlas</h1>
    <div class='tip'>Hover a node to highlight neighborhood. Click to pin details.</div>
    <div style='margin:8px 0'><span class='badge'>Size = PageRank</span><span class='badge'>Dashed = Fluxus</span><span class='badge'>Columns = Layers</span></div>
    <h2>Search</h2><input id='q' placeholder='Find node…'/>
    <h2>Filters</h2><div class='row'>
      <select id='layer'><option value=''>All layers</option>
        <option value='reasoning_core'>Reasoning Core</option><option value='planning_control'>Planning & Control</option>
        <option value='coordination'>Coordination</option><option value='memory_learning'>Memory & Learning</option>
        <option value='oversight_safety'>Oversight & Safety</option></select>
      <select id='pol'><option value=''>All polarity</option><option value='fluxus'>Fluxus</option><option value='latticus'>Latticus</option></select>
    </div>
    <h2>Details</h2><div id='panel' class='tip'>Click a node…</div>
  </div>
  <div class='right'><div class='svgwrap'>
    <svg id='svg' viewBox='0 0 2000 1400'>
      <defs><marker id='arrow' viewBox='0 0 10 10' refX='10' refY='5' markerWidth='6' markerHeight='6' orient='auto-start-reverse'>
        <path d='M0 0 L10 5 L0 10 Z' fill='currentColor'></path></marker></defs>
      <g id='layers'></g><g id='edges'></g><g id='rings'></g><g id='nodes'></g><g id='labels'></g>
    </svg></div></div></div>
<script>
const NODES = [{"sid": "A", "label": "Prompt Chaining", "pattern": 1, "layer": "reasoning_core", "polarity": "fluxus", "summary": "Break a large task into validated steps; each step checks the prior step before pass‑through.", "pros": "Modular; failure isolation; easier auditing and debugging.", "cons": "Context explosion across steps; error propagation if early checks are weak; added latency; diminishing returns with very long chains.", "weighted_out": 7.2, "weighted_in": 3.6, "pagerank": 0.024536}, {"sid": "B", "label": "Routing", "pattern": 2, "layer": "coordination", "polarity": "latticus", "summary": "Classify intent and context and dispatch to the right specialist; ask clarifying questions when uncertain.", "pros": "Specialization, scalability, tool segregation, lower misfires.", "cons": "Wrong‑path risk; edge‑case sensitivity; often benefits from a manager‑agent overseeing decisions.", "weighted_out": 6.6, "weighted_in": 2.7, "pagerank": 0.035204}, {"sid": "C", "label": "Parallelization", "pattern": 3, "layer": "coordination", "polarity": "latticus", "summary": "Decompose work into independent chunks processed simultaneously by worker agents; normalize and merge outputs.", "pros": "", "cons": "", "weighted_out": 6.45, "weighted_in": 2.1, "pagerank": 0.020242}, {"sid": "D", "label": "Reflection", "pattern": 4, "layer": "reasoning_core", "polarity": "fluxus", "summary": "Draft → critique against rubrics and tests → revise → loop to a quality threshold or max attempts.", "pros": "Higher quality; systematic improvement.", "cons": "Cost and latency; API throttling; requires careful loop limits and robust rubrics.", "weighted_out": 6.45, "weighted_in": 5.1, "pagerank": 0.028037}, {"sid": "E", "label": "Tool Use", "pattern": 5, "layer": "planning_control", "polarity": "latticus", "summary": "Discover available tools, verify permissions, call with proper parameters; parse and normalize outputs; provide fallbacks on failures.", "pros": "", "cons": "", "weighted_out": 7.2, "weighted_in": 4.8, "pagerank": 0.040917}, {"sid": "F", "label": "Planning", "pattern": 6, "layer": "planning_control", "polarity": "latticus", "summary": "Turn big goals into stepwise plans with dependency graphs and constraints (data, authorization, budget, deadlines), then assign to agents and tools.", "pros": "", "cons": "", "weighted_out": 9.3, "weighted_in": 11.1, "pagerank": 0.055551}, {"sid": "G", "label": "Multi-Agent Collaboration", "pattern": 7, "layer": "coordination", "polarity": "latticus", "summary": "An orchestrator manages specialist agents that share resources and memory; tickets and acceptance criteria gate progression.", "pros": "Specialization and parallelism; fits iterative product or software development.", "cons": "Testing and drift management overhead; memory governance required; infrastructure complexity.", "weighted_out": 8.7, "weighted_in": 7.05, "pagerank": 0.041049}, {"sid": "H", "label": "Memory Management", "pattern": 8, "layer": "memory_learning", "polarity": "fluxus", "summary": "Classify and store memories with recency and relevance; compress session context when full; enforce privacy and redaction policies.", "pros": "", "cons": "", "weighted_out": 6.9, "weighted_in": 4.5, "pagerank": 0.033706}, {"sid": "I", "label": "Learning and Adaptation", "pattern": 9, "layer": "memory_learning", "polarity": "fluxus", "summary": "Collect corrections, ratings, outcomes; clean and denoise; update prompts, policies, examples, or product preferences; A/B test; monitor.", "pros": "Continuous improvement and personalization.", "cons": "Operational cost; risk of learning wrong or malicious signals; require quality checks on feedback channels.", "weighted_out": 6.6, "weighted_in": 5.1, "pagerank": 0.061593}, {"sid": "J", "label": "Goal Setting and Monitoring", "pattern": 10, "layer": "planning_control", "polarity": "latticus", "summary": "Define SMART goals with constraints; specify metrics and KPIs; add quality gates; continuously monitor; detect drift; escalate and correct.", "pros": "", "cons": "", "weighted_out": 4.8, "weighted_in": 4.95, "pagerank": 0.041253}, {"sid": "K", "label": "Exception Handling and Recovery", "pattern": 11, "layer": "oversight_safety", "polarity": "latticus", "summary": "Detect and capture errors; classify temporary vs. permanent; retry with exponential backoff; prefer safe fallbacks; handle emergencies; alert with context.", "pros": "", "cons": "", "weighted_out": 7.2, "weighted_in": 14.4, "pagerank": 0.099348}, {"sid": "L", "label": "Human-in-the-Loop", "pattern": 12, "layer": "oversight_safety", "polarity": "latticus", "summary": "Gate high‑risk or edge‑case actions behind review and approval; present diffs and context; allow deny, edit, approve, or takeover.", "pros": "", "cons": "", "weighted_out": 6.3, "weighted_in": 11.1, "pagerank": 0.076111}, {"sid": "M", "label": "Retrieval - RAG", "pattern": 13, "layer": "memory_learning", "polarity": "latticus", "summary": "Ingest and parse sources; chunk (fixed, semantic, or context‑aware); embed; store; query; retrieve top‑K; rerank; answer with citations; optimize for precision and recall.", "pros": "", "cons": "", "weighted_out": 4.5, "weighted_in": 4.5, "pagerank": 0.028446}, {"sid": "N", "label": "Inter-Agent Communication", "pattern": 14, "layer": "coordination", "polarity": "latticus", "summary": "Structured messaging with protocols, message IDs, expirations, and security checks; governance can be boss‑centric, peer democracy, or bulletin‑board style.", "pros": "Fault isolation; full audit trails; explicit contracts.", "cons": "Risk of endless loops, context bloat, and debugging burden; often impractical at scale without strict governance and timeouts.", "weighted_out": 6.6, "weighted_in": 6.6, "pagerank": 0.042914}, {"sid": "O", "label": "Resource-Aware Optimization", "pattern": 15, "layer": "planning_control", "polarity": "latticus", "summary": "Classify task complexity and set budgets; route to small, standard, or reasoning models; monitor tokens, time, and cost; optimize context or switch models when needed.", "pros": "", "cons": "", "weighted_out": 6.9, "weighted_in": 8.7, "pagerank": 0.069949}, {"sid": "P", "label": "Prioritization", "pattern": 19, "layer": "planning_control", "polarity": "latticus", "summary": "Build a dependency graph; score tasks by dependency count, time sensitivity, effort, risk, and business value; compute a priority score; rank; re‑order as conditions change.", "pros": "", "cons": "", "weighted_out": 6.6, "weighted_in": 6.45, "pagerank": 0.050999}, {"sid": "Q", "label": "Evaluation and Monitoring", "pattern": 17, "layer": "oversight_safety", "polarity": "latticus", "summary": "Pre‑deployment quality gates and golden tests; in‑production monitoring of accuracy, performance, cost, and drift; anomaly and regression detection; thresholds trigger alerts and investigation; periodic audits harden the system.", "pros": "", "cons": "", "weighted_out": 6.6, "weighted_in": 23.25, "pagerank": 0.136906}, {"sid": "R", "label": "Guardrails and Safety", "pattern": 18, "layer": "oversight_safety", "polarity": "latticus", "summary": "Upstream input sanitation; PII detection and redaction; injection and malicious content detection; risk classification and controls; output moderation; sandboxing or tool restrictions for high‑risk cases; human oversight for severe events.", "pros": "", "cons": "", "weighted_out": 9.0, "weighted_in": 10.8, "pagerank": 0.076109}, {"sid": "S", "label": "Reasoning Techniques", "pattern": 16, "layer": "reasoning_core", "polarity": "fluxus", "summary": "Choose among sequential reasoning (chain‑of‑thought), branching exploration (tree‑of‑thought with pruning), ensembles (self‑consistency across samples), or adversarial debate; score candidate solutions via rubric; validate and select or compose.", "pros": "", "cons": "", "weighted_out": 6.6, "weighted_in": 1.8, "pagerank": 0.019822}, {"sid": "T", "label": "Exploration and Discovery", "pattern": 20, "layer": "reasoning_core", "polarity": "fluxus", "summary": "Broadly survey sources (experts, datasets, papers); compile; map the knowledge space; cluster themes; score by novelty, impact, gaps, feasibility; choose targets; investigate; synthesize artifacts (conceptual models, contacts, curated datasets, bibliographies); iterate to closure; report and recommend next steps.", "pros": "", "cons": "", "weighted_out": 8.1, "weighted_in": 0.0, "pagerank": 0.017308}];
const EDGES = [{"source": "A", "target": "D", "w": 0.9}, {"source": "A", "target": "Q", "w": 0.8}, {"source": "A", "target": "K", "w": 0.7}, {"source": "B", "target": "O", "w": 0.9}, {"source": "B", "target": "N", "w": 0.7}, {"source": "B", "target": "L", "w": 0.6}, {"source": "C", "target": "G", "w": 0.85}, {"source": "C", "target": "Q", "w": 0.7}, {"source": "C", "target": "A", "w": 0.6}, {"source": "D", "target": "Q", "w": 0.85}, {"source": "D", "target": "L", "w": 0.7}, {"source": "D", "target": "R", "w": 0.6}, {"source": "E", "target": "R", "w": 0.9}, {"source": "E", "target": "K", "w": 0.8}, {"source": "E", "target": "Q", "w": 0.7}, {"source": "F", "target": "J", "w": 0.95}, {"source": "F", "target": "P", "w": 0.85}, {"source": "F", "target": "O", "w": 0.7}, {"source": "F", "target": "G", "w": 0.6}, {"source": "G", "target": "N", "w": 0.9}, {"source": "G", "target": "H", "w": 0.7}, {"source": "G", "target": "K", "w": 0.7}, {"source": "G", "target": "F", "w": 0.6}, {"source": "H", "target": "M", "w": 0.9}, {"source": "H", "target": "I", "w": 0.8}, {"source": "H", "target": "R", "w": 0.6}, {"source": "I", "target": "Q", "w": 0.9}, {"source": "I", "target": "J", "w": 0.7}, {"source": "I", "target": "F", "w": 0.6}, {"source": "J", "target": "Q", "w": 0.9}, {"source": "J", "target": "P", "w": 0.7}, {"source": "K", "target": "L", "w": 0.9}, {"source": "K", "target": "Q", "w": 0.8}, {"source": "K", "target": "R", "w": 0.7}, {"source": "L", "target": "R", "w": 0.8}, {"source": "L", "target": "Q", "w": 0.7}, {"source": "L", "target": "K", "w": 0.6}, {"source": "M", "target": "H", "w": 0.8}, {"source": "M", "target": "E", "w": 0.7}, {"source": "N", "target": "G", "w": 0.9}, {"source": "N", "target": "L", "w": 0.7}, {"source": "N", "target": "K", "w": 0.6}, {"source": "O", "target": "B", "w": 0.9}, {"source": "O", "target": "Q", "w": 0.8}, {"source": "O", "target": "P", "w": 0.6}, {"source": "P", "target": "F", "w": 0.9}, {"source": "P", "target": "O", "w": 0.7}, {"source": "P", "target": "Q", "w": 0.6}, {"source": "Q", "target": "I", "w": 0.9}, {"source": "Q", "target": "K", "w": 0.7}, {"source": "Q", "target": "O", "w": 0.6}, {"source": "R", "target": "E", "w": 0.9}, {"source": "R", "target": "L", "w": 0.8}, {"source": "R", "target": "K", "w": 0.7}, {"source": "R", "target": "N", "w": 0.6}, {"source": "S", "target": "F", "w": 0.8}, {"source": "S", "target": "D", "w": 0.8}, {"source": "S", "target": "A", "w": 0.6}, {"source": "T", "target": "F", "w": 0.8}, {"source": "T", "target": "C", "w": 0.7}, {"source": "T", "target": "M", "w": 0.6}, {"source": "T", "target": "S", "w": 0.6}, {"source": "A", "target": "D", "w": 0.9}, {"source": "A", "target": "Q", "w": 0.8}, {"source": "A", "target": "K", "w": 0.7}, {"source": "B", "target": "O", "w": 0.9}, {"source": "B", "target": "N", "w": 0.7}, {"source": "B", "target": "L", "w": 0.6}, {"source": "C", "target": "G", "w": 0.85}, {"source": "C", "target": "Q", "w": 0.7}, {"source": "C", "target": "A", "w": 0.6}, {"source": "D", "target": "Q", "w": 0.85}, {"source": "D", "target": "L", "w": 0.7}, {"source": "D", "target": "R", "w": 0.6}, {"source": "E", "target": "R", "w": 0.9}, {"source": "E", "target": "K", "w": 0.8}, {"source": "E", "target": "Q", "w": 0.7}, {"source": "F", "target": "J", "w": 0.95}, {"source": "F", "target": "P", "w": 0.85}, {"source": "F", "target": "O", "w": 0.7}, {"source": "F", "target": "G", "w": 0.6}, {"source": "G", "target": "N", "w": 0.9}, {"source": "G", "target": "H", "w": 0.7}, {"source": "G", "target": "K", "w": 0.7}, {"source": "G", "target": "F", "w": 0.6}, {"source": "H", "target": "M", "w": 0.9}, {"source": "H", "target": "I", "w": 0.8}, {"source": "H", "target": "R", "w": 0.6}, {"source": "I", "target": "Q", "w": 0.9}, {"source": "I", "target": "J", "w": 0.7}, {"source": "I", "target": "F", "w": 0.6}, {"source": "J", "target": "Q", "w": 0.9}, {"source": "J", "target": "P", "w": 0.7}, {"source": "K", "target": "L", "w": 0.9}, {"source": "K", "target": "Q", "w": 0.8}, {"source": "K", "target": "R", "w": 0.7}, {"source": "L", "target": "R", "w": 0.8}, {"source": "L", "target": "Q", "w": 0.7}, {"source": "L", "target": "K", "w": 0.6}, {"source": "M", "target": "H", "w": 0.8}, {"source": "M", "target": "E", "w": 0.7}, {"source": "N", "target": "G", "w": 0.9}, {"source": "N", "target": "L", "w": 0.7}, {"source": "N", "target": "K", "w": 0.6}, {"source": "O", "target": "B", "w": 0.9}, {"source": "O", "target": "Q", "w": 0.8}, {"source": "O", "target": "P", "w": 0.6}, {"source": "P", "target": "F", "w": 0.9}, {"source": "P", "target": "O", "w": 0.7}, {"source": "P", "target": "Q", "w": 0.6}, {"source": "Q", "target": "I", "w": 0.9}, {"source": "Q", "target": "K", "w": 0.7}, {"source": "Q", "target": "O", "w": 0.6}, {"source": "R", "target": "E", "w": 0.9}, {"source": "R", "target": "L", "w": 0.8}, {"source": "R", "target": "K", "w": 0.7}, {"source": "R", "target": "N", "w": 0.6}, {"source": "S", "target": "F", "w": 0.8}, {"source": "S", "target": "D", "w": 0.8}, {"source": "S", "target": "A", "w": 0.6}, {"source": "T", "target": "F", "w": 0.8}, {"source": "T", "target": "C", "w": 0.7}, {"source": "T", "target": "M", "w": 0.6}, {"source": "T", "target": "S", "w": 0.6}, {"source": "A", "target": "D", "w": 0.9}, {"source": "A", "target": "Q", "w": 0.8}, {"source": "A", "target": "K", "w": 0.7}, {"source": "B", "target": "O", "w": 0.9}, {"source": "B", "target": "N", "w": 0.7}, {"source": "B", "target": "L", "w": 0.6}, {"source": "C", "target": "G", "w": 0.85}, {"source": "C", "target": "Q", "w": 0.7}, {"source": "C", "target": "A", "w": 0.6}, {"source": "D", "target": "Q", "w": 0.85}, {"source": "D", "target": "L", "w": 0.7}, {"source": "D", "target": "R", "w": 0.6}, {"source": "E", "target": "R", "w": 0.9}, {"source": "E", "target": "K", "w": 0.8}, {"source": "E", "target": "Q", "w": 0.7}, {"source": "F", "target": "J", "w": 0.95}, {"source": "F", "target": "P", "w": 0.85}, {"source": "F", "target": "O", "w": 0.7}, {"source": "F", "target": "G", "w": 0.6}, {"source": "G", "target": "N", "w": 0.9}, {"source": "G", "target": "H", "w": 0.7}, {"source": "G", "target": "K", "w": 0.7}, {"source": "G", "target": "F", "w": 0.6}, {"source": "H", "target": "M", "w": 0.9}, {"source": "H", "target": "I", "w": 0.8}, {"source": "H", "target": "R", "w": 0.6}, {"source": "I", "target": "Q", "w": 0.9}, {"source": "I", "target": "J", "w": 0.7}, {"source": "I", "target": "F", "w": 0.6}, {"source": "J", "target": "Q", "w": 0.9}, {"source": "J", "target": "P", "w": 0.7}, {"source": "K", "target": "L", "w": 0.9}, {"source": "K", "target": "Q", "w": 0.8}, {"source": "K", "target": "R", "w": 0.7}, {"source": "L", "target": "R", "w": 0.8}, {"source": "L", "target": "Q", "w": 0.7}, {"source": "L", "target": "K", "w": 0.6}, {"source": "M", "target": "H", "w": 0.8}, {"source": "M", "target": "E", "w": 0.7}, {"source": "N", "target": "G", "w": 0.9}, {"source": "N", "target": "L", "w": 0.7}, {"source": "N", "target": "K", "w": 0.6}, {"source": "O", "target": "B", "w": 0.9}, {"source": "O", "target": "Q", "w": 0.8}, {"source": "O", "target": "P", "w": 0.6}, {"source": "P", "target": "F", "w": 0.9}, {"source": "P", "target": "O", "w": 0.7}, {"source": "P", "target": "Q", "w": 0.6}, {"source": "Q", "target": "I", "w": 0.9}, {"source": "Q", "target": "K", "w": 0.7}, {"source": "Q", "target": "O", "w": 0.6}, {"source": "R", "target": "E", "w": 0.9}, {"source": "R", "target": "L", "w": 0.8}, {"source": "R", "target": "K", "w": 0.7}, {"source": "R", "target": "N", "w": 0.6}, {"source": "S", "target": "F", "w": 0.8}, {"source": "S", "target": "D", "w": 0.8}, {"source": "S", "target": "A", "w": 0.6}, {"source": "T", "target": "F", "w": 0.8}, {"source": "T", "target": "C", "w": 0.7}, {"source": "T", "target": "M", "w": 0.6}, {"source": "T", "target": "S", "w": 0.6}];
const POS = {"D": {"x": 220, "y": 120}, "A": {"x": 220, "y": 240}, "S": {"x": 220, "y": 360}, "T": {"x": 220, "y": 480}, "O": {"x": 480, "y": 120}, "F": {"x": 480, "y": 240}, "P": {"x": 480, "y": 360}, "J": {"x": 480, "y": 480}, "E": {"x": 480, "y": 600}, "N": {"x": 740, "y": 120}, "G": {"x": 740, "y": 240}, "B": {"x": 740, "y": 360}, "C": {"x": 740, "y": 480}, "I": {"x": 1000, "y": 120}, "H": {"x": 1000, "y": 240}, "M": {"x": 1000, "y": 360}, "Q": {"x": 1260, "y": 120}, "K": {"x": 1260, "y": 240}, "L": {"x": 1260, "y": 360}, "R": {"x": 1260, "y": 480}};
const LAYERS = ["reasoning_core", "planning_control", "coordination", "memory_learning", "oversight_safety"];
const colors = {"reasoning_core":"#3b82f6","planning_control":"#10b981","coordination":"#60a5fa","memory_learning":"#a78bfa","oversight_safety":"#f59e0b"};
const svg=document.getElementById('svg'), gL=document.getElementById('layers'), gE=document.getElementById('edges'), gR=document.getElementById('rings'), gN=document.getElementById('nodes'), gT=document.getElementById('labels'), panel=document.getElementById('panel');
const q=document.getElementById('q'), selLayer=document.getElementById('layer'), selPol=document.getElementById('pol');
const margin_left=220, col_w=260;
LAYERS.forEach((layer,i)=>{const x=margin_left+i*col_w; const t=document.createElementNS("http://www.w3.org/2000/svg","text"); t.setAttribute("x",x); t.setAttribute("y",60); t.setAttribute("class","layer"); t.textContent=layer.replace("_"," "); gL.appendChild(t);
  const line=document.createElementNS("http://www.w3.org/2000/svg","line"); line.setAttribute("x1",x); line.setAttribute("y1",72); line.setAttribute("x2",x); line.setAttribute("y2",1400); line.setAttribute("stroke","#1f2937"); line.setAttribute("stroke-width","1"); gL.appendChild(line); });
const es=EDGES.map(e=>{const s=POS[e.source], t=POS[e.target]; const p=document.createElementNS("http://www.w3.org/2000/svg","path"); const mx=(s.x+t.x)/2, my=(s.y+t.y)/2-20; p.setAttribute("d",`M ${s.x} ${s.y} Q ${mx} ${my} ${t.x} ${t.y}`); p.setAttribute("stroke-width",0.5+e.w*1.5); p.setAttribute("class","edge"); gE.appendChild(p); return {el:p, e}; });
const ns=NODES.map(n=>{const p=POS[n.sid]; const g=document.createElementNS("http://www.w3.org/2000/svg","g"); g.setAttribute("class","node");
  const r=16+n.pagerank*40; const ring=document.createElementNS("http://www.w3.org/2000/svg","circle"); ring.setAttribute("cx",p.x); ring.setAttribute("cy",p.y); ring.setAttribute("r",r+6); ring.setAttribute("class","ring"); gR.appendChild(ring);
  const c=document.createElementNS("http://www.w3.org/2000/svg","circle"); c.setAttribute("cx",p.x); c.setAttribute("cy",p.y); c.setAttribute("r",r); c.setAttribute("fill",colors[n.layer]||"#94a3b8"); c.setAttribute("stroke",n.polarity==="fluxus"?"#fff":"#cbd5e1"); c.setAttribute("stroke-width",n.polarity==="fluxus"?"3":"1.5"); if(n.polarity==="fluxus") c.setAttribute("class","dash"); g.appendChild(c);
  const t=document.createElementNS("http://www.w3.org/2000/svg","text"); t.setAttribute("x",p.x); t.setAttribute("y",p.y+4); t.setAttribute("text-anchor","middle"); t.textContent=n.sid+" · "+n.label; gT.appendChild(t); gN.appendChild(g); g.dataset.sid=n.sid; return {g,ring,c,t,n}; });
function neigh(sid){const outs=EDGES.filter(x=>x.source===sid).map(x=>x.target); const ins=EDGES.filter(x=>x.target===sid).map(x=>x.source); return new Set([sid,...outs,...ins]);}
function highlight(sid){const set=sid?neigh(sid):null; ns.forEach(x=>{const on=!set||set.has(x.n.sid); x.c.style.opacity=on?1:0.2; x.ring.style.opacity=on?0.22:0.05; x.t.style.opacity=on?1:0.25;});
  es.forEach(x=>{const on=sid&&(x.e.source===sid||x.e.target===sid); x.el.setAttribute("class", on?"edge edgehi":"edge");});}
function details(n){panel.innerHTML=`<div><strong>${n.sid} · ${n.label}</strong></div>
  <div>Pattern: ${n.pattern||"—"} · Layer: ${n.layer} · Polarity: ${n.polarity}</div>
  <div>Influence (PR): ${n.pagerank.toFixed(4)} · In: ${n.weighted_in.toFixed(2)} · Out: ${n.weighted_out.toFixed(2)}</div>
  ${n.summary?`<div style="margin-top:6px"><strong>Definition:</strong> ${n.summary}</div>`:""}
  <div style='margin-top:6px;font-size:12px;color:#9ca3af'>Source: 20 Agentic Design Patterns — Structured Transcript.</div>`;}
ns.forEach(x=>{x.g.addEventListener('mouseenter',()=>highlight(x.n.sid)); x.g.addEventListener('mouseleave',()=>highlight(null)); x.g.addEventListener('click',()=>details(x.n));});
const input=document.getElementById('q');
function applyFilters(){const qv=(input.value||"").trim().toLowerCase(); const lv=selLayer.value; const pv=selPol.value;
  ns.forEach(x=>{const text=(x.n.label+" "+x.n.summary).toLowerCase(); const show=(!qv||text.includes(qv))&&(!lv||x.n.layer===lv)&&(!pv||x.n.polarity===pv);
    x.c.style.opacity=show?1:0.05; x.ring.style.opacity=show?0.22:0.02; x.t.style.opacity=show?1:0.05;});
  const vis=new Set(ns.filter(x=>x.c.style.opacity>=0.9).map(x=>x.n.sid));
  es.forEach(e=>{const on=vis.has(e.e.source)&&vis.has(e.e.target); e.el.style.opacity=on?.9:.05;});}
input.addEventListener('input',applyFilters); selLayer.addEventListener('change',applyFilters); selPol.addEventListener('change',applyFilters);
</script></body></html>